<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>{{ restaurant.name }} - Admin</title>
		<link rel="stylesheet" href="/css/restaurant/admin/main.css">
		<script src="/js/firebase.js" defer></script>
		<script src="/js/restaurant/admin/main.js" defer></script>
		<script src="/js/common.js" defer></script>
	</head>
	<body>
		{% include "header.html" %}
		<main>
			<h2>{{ restaurant.name }} - Admin</h2>
			<hr>
			<button onclick="openRestaurantPage()">View page</button>
			<button onclick="editRestaurantDetails()">Edit details</button>
			<button onclick="closeRestaurant()">Close restaurant</button>
			<section id="menu-add-section">
				<h3>Add A Menu</h3>
				<label for="menu-title-input">Menu Title</label>
				<input id="menu-title-input" type="text" name="title" placeholder="Menu Title">
				<label for="menu-image-input">Menu Icon</label>
				<input id="menu-image-input" type="file">
				<button onclick="addMenu()" id="add-menu-button">Add New Menu</button>
			</section>
	
			<h2>Menus</h2>
			<div id="menu-list">
				{% if not restaurant.menus %}
					<p>This restaurant has no menus</p>
				{% endif %}
				{% for menu_index, menu in restaurant.menus: %}
					<div class="menu" data-menu-index="{{ menu_index }}">
						<img class="menu-image" src="{{ ('restaurants/'~user['uid']~'/menus/'~menu_index~'/image') | firebase_storage_url }}">
						<div>
							<h3 class="menu-title">{{ menu.name }}</h3>
							<p>{{ menu.dishes | length }} dishes</p>
							<button onclick="editMenu(this)">Edit menu</button>
							<button onclick="deleteMenu(this)">Delete menu</button>
						</div>
					</div>
				{% endfor %}
			</div>
		</main>
	</body>
</html>